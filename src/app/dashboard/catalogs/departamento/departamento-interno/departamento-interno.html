<div class="departamento-detalle">

  <!-- Estado inicial visual cuando no hay departamento seleccionado -->
  <div class="reportes__empty-state" *ngIf="!departamentoSeleccionado">
    <div class="empty-state">
      <i class="fas fa-building empty-state__icon"></i>
      <h3 class="empty-state__title">Selecciona un departamento</h3>
      <p class="empty-state__message">
        Elige un departamento de la lista para ver sus empleados y gestionarlos.
      </p>
    </div>
  </div>

  <!-- Cuando hay un departamento seleccionado -->
  <div class="titulo" *ngIf="departamentoSeleccionado">
    <h2>{{ departamentoSeleccionado.nombreDepartamento }} / Empleados</h2>
  </div>

  <div class="buscador" *ngIf="departamentoSeleccionado">
    <input
      type="text"
      [(ngModel)]="busqueda"
      (input)="filtrarEmpleados()"
      placeholder="Buscar empleado por nombre completo..."
    />
  </div>

  <div class="lista-empleados" *ngIf="departamentoSeleccionado && empleadosFiltrados.length > 0">
    <div class="empleado-renglon" *ngFor="let empleado of empleadosFiltrados">
      <div class="info">
        <span class="puesto">{{ empleado.puesto?.nombre || 'Sin puesto asignado' }}</span>
        <strong>{{ empleado.nombreEmpleado }} {{ empleado.apellidoPaternoEmpleado }} {{ empleado.apellidoMaternoEmpleado }}</strong>
      </div>

      <div class="menu">
        <button (click)="toggleMenu(empleado.id)">⋮</button>

        <ul class="menu-opciones" *ngIf="menuEmpleadoAbiertoId === empleado.id">
          <li (click)="editarEmpleado(empleado)">Editar</li>
          <li (click)="cambiarDepartamento(empleado)">Cambiar de departamento</li>
          <li (click)="eliminarEmpleado(empleado)">Eliminar</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="no-seleccion" *ngIf="departamentoSeleccionado && empleadosFiltrados.length === 0">
    <p>No hay empleados que coincidan con la búsqueda.</p>
  </div>

</div>
